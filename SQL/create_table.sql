CREATE TABLE GALLERY
(
    GID VARCHAR(10) PRIMARY KEY,
    GNAME VARCHAR(20),
    GLOCATION VARCHAR(40)
);

CREATE TABLE EXHIBITION
(
    EID VARCHAR(10) PRIMARY KEY,
    ENAME VARCHAR(20),
    ESTARTDATE DATE,
    EENDDATE DATE,
    GID VARCHAR(10),
    FOREIGN KEY(GID) REFERENCES GALLERY(GID) ON DELETE CASCADE
);

CREATE TABLE CUSTOMER
(
    CID VARCHAR(10) PRIMARY KEY,
    CNAME VARCHAR(20),
    CADDRESS VARCHAR(40),
    CDOB DATE,
    CPHONE VARCHAR(11)
);

CREATE TABLE ARTIST
(
    ARTISTID VARCHAR(10) PRIMARY KEY,
    ARTISTNAME VARCHAR(20),
    ARTISTBP VARCHAR(40),
    ARTISTSTYLE VARCHAR(20),
    GID VARCHAR(10),
    FOREIGN KEY(GID) REFERENCES GALLERY(GID) ON DELETE CASCADE
);

CREATE TABLE ARTWORK
(
    ARTID VARCHAR(10) PRIMARY KEY,
    ARTTITLE VARCHAR(20),
    ARTTYPE VARCHAR(10),
    ARTYEAR VARCHAR(4),
    ARTPRICE MONEY,
    ARTSTATUS VARCHAR(10) DEFAULT('NORMAL'),
    ARTISTID VARCHAR(10),
    GID VARCHAR(10),
    EID VARCHAR(10),
    FOREIGN KEY(ARTISTID) REFERENCES ARTIST(ARTISTID),
    FOREIGN KEY(GID) REFERENCES GALLERY(GID),
    FOREIGN KEY(EID) REFERENCES EXHIBITION(EID),
);

CREATE TABLE CUST_RECORD
(
    EID VARCHAR(10),
    CID VARCHAR(10),
    SATISFACTION SMALLINT,
    PRIMARY KEY(EID,CID),
    FOREIGN KEY(EID) REFERENCES EXHIBITION(EID),
    FOREIGN KEY(CID) REFERENCES CUSTOMER(CID),
    CHECK(SATISFACTION>0 AND SATISFACTION<=5)
);

CREATE TABLE EXB_ARTIST
(
    EID VARCHAR(10),
    ARTISTID VARCHAR(10),
    PRIMARY KEY(EID,ARTISTID),
    FOREIGN KEY(EID) REFERENCES EXHIBITION(EID),
    FOREIGN KEY(ARTISTID) REFERENCES ARTIST(ARTISTID)
);

CREATE TABLE TRADE
(
    TRADEID VARCHAR(10) PRIMARY KEY,
    CID VARCHAR(10),
    ARTID VARCHAR(10),
    TRADEDATE DATE,
    TRADESTATUS VARCHAR(10),
    GID VARCHAR(10),
    FOREIGN KEY(CID) REFERENCES CUSTOMER(CID),
    FOREIGN KEY(GID) REFERENCES GALLERY(GID),
    FOREIGN KEY(ARTID) REFERENCES ARTWORK(ARTID)
);
